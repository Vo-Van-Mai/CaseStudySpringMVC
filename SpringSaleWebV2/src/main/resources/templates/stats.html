<!<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" >
    <head>
    <th:object th:replace="base :: bt"></th:object>
</head>
<body>
    <div th:replace="base :: menu"></div>
    <main class="container">
        <h1 class="text-center text-success">
            THỐNG KÊ BÁO CÁO
        </h1>

        <div class="row">
            <div class="col-5">
                <table class="table table-striped">
                    <thead>
                      <tr>
                         <th>Mã sản phẩm</th>
                        <th>Tên sản phẩm</th>
                        <th>Doanh thu</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr th:each="p: ${revenues}">
                        <td th:text="${p[0]}"></td>                        
                        <td th:text="${p[1]}"></td>
                        <td th:text="${p[2]} + 'VNĐ'"></td>
                    </tr>
                    </tbody>
                  </table>
            </div>
            <div class="col-7">
                 <canvas id="myChart"></canvas>
            </div>
        </div>
    </main>

    <div th:replace="base :: footer"></div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script th:inline="javascript">
        let revenues = [[${revenues}]];
        let data = revenues.map(r => r[2]);
        let label = revenues.map(r => r[1]);
        window.onload = function () {
            
            const ctx = document.getElementById('myChart');
                
                new Chart(ctx, {
                  type: 'bar',
                  data: {
                    labels: label,
                    datasets: [{
                      label: '# doanh thu',
                      data: data,
                      borderWidth: 1
                    }]
                  },
                  options: {
                    scales: {
                      y: {
                        beginAtZero: true
                      }
                    }
                  }
                });
                      }
    </script>
</body>
</html>
